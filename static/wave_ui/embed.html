<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuantoniumOS Wave Visualization Embed</title>
    <link rel="stylesheet" href="wave.css">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: transparent;
            color: #ffffff;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        
        .embed-container {
            width: 100%;
            height: 100%;
            max-height: 250px;
            position: relative;
        }
        
        .attribution {
            position: absolute;
            bottom: 5px;
            right: 10px;
            font-size: 10px;
            opacity: 0.7;
            z-index: 100;
        }
        
        .attribution a {
            color: #1f93ff;
            text-decoration: none;
        }
        
        .attribution a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="embed-container">
        <div class="waveform-match-visualization">
            <div class="match-indicator" id="match-indicator">Quantum Resonance Analysis</div>
            <div id="wave-animation-container"></div>
        </div>
        <div class="attribution">
            <a href="/os" target="_blank">QuantoniumOS</a>
        </div>
    </div>
    
    <script src="wave_visualization.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get URL parameters
            const params = new URLSearchParams(window.location.search);
            const seed = params.get('seed') || 'QuantoniumOS';
            const matchState = params.get('match') !== 'false'; // Default to matched
            const status = matchState ? 'matched' : 'mismatched';
            const message = matchState ? 'Resonance Match: Verified' : 'Resonance Mismatch: Invalid Key';
            
            // Update match indicator
            updateMatchIndicator('match-indicator', status, message);
            
            // Create visualization
            createWaveVisualization('wave-animation-container', seed, matchState);
            
            // Auto refresh every 30 seconds with new seed if enabled
            if (params.get('auto') === 'true') {
                setInterval(() => {
                    const randomSeed = Math.random().toString(36).substring(2, 15);
                    createWaveVisualization('wave-animation-container', randomSeed, matchState);
                }, 30000);
            }
        });
    </script>
</body>
</html>